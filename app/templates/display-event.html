{% extends "base.html" %}
{% block style%}
<link rel="stylesheet" href="/static/css/display-event.css">
{% endblock%}

{% block content %}
<style>
.container{
    padding:20px;
    margin-top:100px;
    max-width:500px;
    text-align:center;
    background-color: #fafafa;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
    text-align:left;
    padding:10px;
}
.modal{
    position:fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background:white;
}
.fade{
    opacity:1;
}

.nav .nav-tabs > .active {
     background:grey;
}
</style>
<body>
   <div class="container">
       <h1>{{event['name'] }}</h1>
       <br>
       <h2>Description</h2>
       <p>{{event['description']}}</p>
       <div class="inviteField">
           <h2>Invitation Status</h2>
           {% if status == "invited" %}
           <p>You have been invited! Please confirm your attendance</p>
           <button class="btn btn-success"><a class="attendance" href="{{url_for('acceptInvite', eventId = event['_id'],acceptance = "going")}}">Accept</a></button>
           <button class="btn btn-warning"><a class="attendance" href="{{url_for('acceptInvite', eventId = event['_id'], acceptance = "maybe")}}">Maybe</a></button>
           <button class="btn btn-danger"><a class="attendance" href="{{url_for('acceptInvite', eventId = event['_id'], acceptance = "decline")}}">Decline</a></button>
           {% else %}
           <h2>Co-Hosts</h2>
           <p>{{status}}</p>
           {% endif %}
           <h2>Invited Guests</h2>

        </div>
       <ul>

           
           {% for dictionary_item in event['invitees'] %}
            <p>{{dictionary_item['email']}} <a href="{{url_for('deleteInvite', eventId = event['_id'], userId = dictionary_item['id'])}}">X</a></p>
           {% endfor %}
       </ul>
       <!-- Parts of this code was from https://getbootstrap.com/docs/4.0/components/navs/ -->
       <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#DisplayFriends">See All</button>

           <div class="modal fade" id = "DisplayFriends" role="dialog">
               <ul class="nav nav-tabs">
                   <li class="active">
                       <a data-toggle = "tab" href="#going">Going</a>
                   </li>
                   <li >
                       <a data-toggle = "tab" href="#maybe">Maybe</a>
                   </li>
                   <li>
                       <a data-toggle = "tab" href="#declined">Declined</a>
                   </li>
                   <li>
                       <a data-toggle = "tab" href="#invited">Invited</a>
                   </li>
                </ul>
                <div class="tab-content">
                    <div id = "going" class="tab-pane fade in active">
                        <h3>Going</h3>
                        <ul>
                            {% for item in going%}
                              <li> {{item['name']}} </li>
                            {% endfor%}
                        </ul>
                    </div>
                    <div id = "maybe" class="tab-pane fade in">
                        <h3>maybe</h3>
                        <ul>
                            {% for item in maybe%}
                              <li> {{item['name']}}  </li>
                            {% endfor%}
                        </ul>
                    </div>
                    <div id = "declined" class="tab-pane fade in">
                        <h3>Declined</h3>
                        <ul>
                            {% for item in declined%}
                              <li> {{item['name']}}  </li>
                            {% endfor%}
                        </ul>
                    </div>
                    <div id = "invited" class="tab-pane fade in">
                        <h3>Invited</h3>
                        <ul>
                            {%if host == 1 %}
                                {% for item in invited%}
                                  <li> {{item['name']}}  </li> <img src="/static/images/profile/{{item['pictureDir']}}" class="dp"> <a href="#">X</a>
                                {% endfor%}
                            {% else %}
                                {% for item in invited %}
                                  <li> {{item['name']}}  </li> <img src="/static/images/profile/{{item['pictureDir']}}" class="dp">
                                {% endfor%}
                            {% endif %}
                        </ul>
                    </div>
                   </div>
              </div>

           <!-- End code from https://getbootstrap.com/docs/4.0/components/navs/ -->
    {% if host == 1 %}
      <input type = "text" id = "myInput" onkeyup ="hi()" placeholder="Search for your friends">
      <ul id = "friends">
       </ul>
   </div>

   <script type="text/javascript" src="{{ url_for('static', filename='js/display-event.js') }}"></script>
   <script>
       function hi(){
           var id = "{{event['_id']}}"
           var friendlist = {{friends | safe}};
           myFunction(friendlist,id)
       }
   </script>
   {% else %}
   {% endif %}

</body>

{% endblock %}
